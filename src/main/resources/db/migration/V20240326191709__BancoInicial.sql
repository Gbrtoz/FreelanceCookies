CREATE TABLE usuario (
  id INT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
   nome VARCHAR(255) NOT NULL,
   email VARCHAR(255) NOT NULL,
   cpf VARCHAR(255) NOT NULL,
   telefone VARCHAR(255) NOT NULL,
   senha VARCHAR(255) NOT NULL,
   saldo DOUBLE PRECISION NOT NULL,
   nota DOUBLE PRECISION NOT NULL,
   avaliacoes DOUBLE PRECISION NOT NULL,
   CONSTRAINT pk_usuario PRIMARY KEY (id)
);


CREATE TABLE deposito_saque (
  id INT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
   usuario_id INT,
   alteracao DOUBLE PRECISION NOT NULL,
   agencia INT NOT NULL,
   conta INT NOT NULL,
   tempo_atual TIMESTAMP NOT NULL,
   CONSTRAINT pk_depositosaque PRIMARY KEY (id)
);

ALTER TABLE deposito_saque ADD CONSTRAINT FK_DEPOSITOSAQUE_ON_USUARIO FOREIGN KEY (usuario_id) REFERENCES usuario (id);

CREATE TABLE oferta (
  id INT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
   usuario_id INT,
   titulo VARCHAR(255) NOT NULL,
   texto VARCHAR(255) NOT NULL,
   imagem VARCHAR(255),
   prazo INT NOT NULL,
   preco DOUBLE PRECISION NOT NULL,
   status BOOLEAN NOT NULL,
   tempo_atual TIMESTAMP NOT NULL,
   CONSTRAINT pk_oferta PRIMARY KEY (id)
);

ALTER TABLE oferta ADD CONSTRAINT FK_OFERTA_ON_USUARIO FOREIGN KEY (usuario_id) REFERENCES usuario (id);


CREATE TABLE proposta (
  id INT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
   usuario_id INT,
   oferta_id INT,
   texto VARCHAR(255),
   prazo INT NOT NULL,
   preco DOUBLE PRECISION NOT NULL,
   tempo_atual TIMESTAMP NOT NULL,
   CONSTRAINT pk_proposta PRIMARY KEY (id)
);

ALTER TABLE proposta ADD CONSTRAINT FK_PROPOSTA_ON_OFERTA FOREIGN KEY (oferta_id) REFERENCES oferta (id);

ALTER TABLE proposta ADD CONSTRAINT FK_PROPOSTA_ON_USUARIO FOREIGN KEY (usuario_id) REFERENCES usuario (id);

CREATE TABLE transacao (
  id INT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
   pagador_id INT,
   recebedor_id INT,
   oferta_id INT,
   tempo_atual TIMESTAMP NOT NULL,
   transacao DOUBLE PRECISION NOT NULL,
   CONSTRAINT pk_transacao PRIMARY KEY (id)
);

ALTER TABLE transacao ADD CONSTRAINT FK_TRANSACAO_ON_OFERTA FOREIGN KEY (oferta_id) REFERENCES oferta (id);

ALTER TABLE transacao ADD CONSTRAINT FK_TRANSACAO_ON_PAGADOR FOREIGN KEY (pagador_id) REFERENCES usuario (id);

ALTER TABLE transacao ADD CONSTRAINT FK_TRANSACAO_ON_RECEBEDOR FOREIGN KEY (recebedor_id) REFERENCES usuario (id);

CREATE TABLE reclamacao (
  id INT GENERATED BY DEFAULT AS IDENTITY NOT NULL,
   usuario_id INT,
   usuario_reclamado_id INT,
   texto VARCHAR(255) NOT NULL,
   tempo_atual TIMESTAMP,
   CONSTRAINT pk_reclamacao PRIMARY KEY (id)
);

ALTER TABLE reclamacao ADD CONSTRAINT FK_RECLAMACAO_ON_USUARIO FOREIGN KEY (usuario_id) REFERENCES usuario (id);

ALTER TABLE reclamacao ADD CONSTRAINT FK_RECLAMACAO_ON_USUARIORECLAMADO FOREIGN KEY (usuario_reclamado_id) REFERENCES usuario (id);